---
layout: post
title: window.print()
categories: 原创
tags: JavaScript
---

你是人间四月天，樱花树下，岂有陌路人

<!--more-->

今天有一个打印的需求，之前在做另一个项目的时候也用过打印，当时去网上随便找了一段简单的代码就写上去了，
发现一旦答应了之后很多功能就失效了，当时不知道怎么回事，现在回过头来看代码就知道了。

实现思路：我们只能打印一整个页面，但需求往往只要我们打印一部分，也就是局部打印，
这个实现思路大概就是用特殊的标记将被打印的局部取出来，然后通过新开一个窗口或者`iframe`的方式将打印内容放进去，
最后使用`window.print()`打印出来。

`window.print()`触发之后，不同的浏览器对于打印的表现可能不同，实际上调用该方法等同于按了`Ctrl + p`或者`command + p`，
各个浏览器有自己的表现。但是这么牛逼的一个API居然不能传参数，真的是`low`爆了。

目前发现的问题是页眉和页脚没有办法通过代码的方式删除，无法控制打印的页数。

IE浏览器内置了`WebBrowser`控件，能更好的支持打印，但仅限于IE。且IE修改注册表可以去除页眉和页脚，也能控制打印页数。

全局打印

    window.print()

局部打印（[demo](https://github.com/karynsong/print/blob/master/simple.html)）:
直接将`body`的内容改了，然后调用`window.print()`，打印完了再将`body`的内容还原回去，这显然是非常不靠谱的，
之前在`dom`上绑定的事件都不在了。

局部打印不删除`dom`（[demo](https://github.com/karynsong/print/blob/master/index.html)）：
高端点的办法，就是打开一个`iframe`或者新开一个窗口，再调用打印。

IE插件模式（[demo](https://github.com/karynsong/print/blob/master/index.html))：
这个只适用于IE，基本上可以完成所有打印的需求。

打印多份：除了让用户点打印多份，还可以了解一下A4纸大概的高度。然后将内容撑开。多复制内容几份已达到多份的效果。

实在想玩儿了，周一细说